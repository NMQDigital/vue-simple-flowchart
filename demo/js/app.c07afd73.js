(function(t){function e(e){for(var o,s,r=e[0],l=e[1],c=e[2],u=0,h=[];u<r.length;u++)s=r[u],i[s]&&h.push(i[s][0]),i[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);d&&d(e);while(h.length)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},i={app:0},a=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1387:function(t,e,n){},3125:function(t,e,n){},4993:function(t,e,n){"use strict";var o=n("1387"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("simple-flowchart",{ref:"flowchart",attrs:{scene:t.flowchartData,categories:t.nodeCategory,height:1e3},on:{"update:scene":function(e){t.flowchartData=e},nodeClick:t.nodeClick,nodeDelete:t.nodeDelete,linkBreak:t.linkBreak,linkAdded:t.linkAdded,canvasClick:t.canvasClick}})],1)},a=[],s=n("0a0d"),r=n.n(s),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flowchart-container",on:{mousemove:t.handleMove,mouseup:t.handleUp,mousedown:t.handleDown}},[n("div",{staticClass:"node-add-btn",on:{click:function(e){t.paneControl=!t.paneControl}}},[t._v(t._s(t.paneControl?"-":"+"))]),t.paneControl?n("div",{staticClass:"node-add-pnl"},t._l(t.nodeCategory,function(e,o){return n("div",{key:o,staticClass:"node-category-box",on:{dblclick:function(n){t.addNode(e)}}},[t._v(t._s(e.text))])})):t._e(),n("svg",{attrs:{width:"100%",height:t.height+"px"}},t._l(t.lines,function(e,o){return n("flowchart-link",t._b({key:"link"+o,on:{deleteLink:function(n){t.linkDelete(e.id)},editLink:function(n){t.linkEdit(e.id)}}},"flowchart-link",e,!1,!0))})),t._l(t.flowchartData.nodes,function(e,o){return n("flowchart-node",t._b({key:"node"+o,attrs:{options:t.nodeOptions},on:{linkingStart:function(n){t.linkingStart(e.id)},linkingStop:function(n){t.linkingStop(e.id)},nodeSelected:function(n){t.nodeSelected(e.id,n)}}},"flowchart-node",e,!1,!0))}),t.nodeValues.editModeNode?n("div",{staticClass:"node-edit-wrapper"},[n("div",{staticClass:"node-edit-panel"},[t._m(0),n("div",{staticClass:"node-edit-panel-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.nodeValues.text,expression:"nodeValues.text"}],attrs:{type:"text"},domProps:{value:t.nodeValues.text},on:{input:function(e){e.target.composing||t.$set(t.nodeValues,"text",e.target.value)}}})]),n("div",{staticClass:"flat-button",on:{click:t.acceptChanges}},[t._v("Accept Changes")])])]):t._e(),t.nodeValues.editModeLink?n("div",{staticClass:"node-edit-wrapper"},[n("div",{staticClass:"node-edit-panel"},[t._m(1),n("div",{staticClass:"node-edit-panel-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.nodeValues.text,expression:"nodeValues.text"}],attrs:{type:"text"},domProps:{value:t.nodeValues.text},on:{input:function(e){e.target.composing||t.$set(t.nodeValues,"text",e.target.value)}}})]),n("div",{staticClass:"flat-button",on:{click:t.acceptChanges}},[t._v("Accept Changes")])])]):t._e()],2)},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node-edit-panel-header"},[n("h4",[t._v("Edit Node Value")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node-edit-panel-header"},[n("h4",[t._v("Edit Link Value")])])}],d=n("5176"),u=n.n(d),h=(n("20d6"),n("f499")),f=n.n(h),p=n("75fc"),m=(n("7514"),n("768b")),g=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{on:{mouseover:t.handleMouseOver,mouseleave:t.handleMouseLeave}},[n("a",{on:{click:t.editLinkText}},[n("text",{staticClass:"link-change-btn",attrs:{"text-anchor":"right",transform:t.textTransform,"font-size":"24"}},[t._v(t._s(t.text||"-"))])]),n("path",{style:t.pathStyle,attrs:{d:t.dAttr}}),t.show.delete?n("a",{on:{click:t.deleteLink}},[n("text",{attrs:{"text-anchor":"middle",transform:t.arrowTransform,"font-size":"40"}},[t._v("×")])]):n("path",{style:t.arrowStyle,attrs:{d:"M -1 -1 L 0 1 L 1 -1 z",transform:t.arrowTransform}})])}),v=[],w={name:"FlowchartLink",props:{start:{type:Array,default:function(){return[0,0]}},end:{type:Array,default:function(){return[0,0]}},id:Number,text:String},data:function(){return{show:{delete:!1}}},methods:{handleMouseOver:function(){this.id&&(this.show.delete=!0)},handleMouseLeave:function(){this.show.delete=!1},caculateCenterPoint:function(){var t=(this.end[0]-this.start[0])/2,e=(this.end[1]-this.start[1])/2;return[this.start[0]+t,this.start[1]+e]},caculateRotation:function(){var t=-Math.atan2(this.end[0]-this.start[0],this.end[1]-this.start[1]),e=180*t/Math.PI;return e<0?e+360:e},deleteLink:function(){this.$emit("deleteLink")},editLinkText:function(){this.$emit("editLink")}},computed:{pathStyle:function(){return{stroke:"black",strokeWidth:2.73205,fill:"none"}},arrowStyle:function(){return{stroke:"red",strokeWidth:12,fill:"none"}},arrowTransform:function(){var t=this.caculateCenterPoint(),e=Object(m["a"])(t,2),n=e[0],o=e[1],i=this.caculateRotation();return"translate(".concat(n,", ").concat(o,") rotate(").concat(i,")")},textTransform:function(){var t=this.caculateCenterPoint(),e=Object(m["a"])(t,2),n=e[0],o=e[1],i=this.caculateRotation();return"translate(".concat(n+45,", ").concat(o,") rotate(").concat(i>0&&i<180?i-90:i+90,")")},dAttr:function(){var t=this.start[0],e=this.start[1],n=this.end[0],o=this.end[1],i=t,a=e+40,s=n,r=o-40;return"M ".concat(t,", ").concat(e," C ").concat(i,", ").concat(a,", ").concat(s,", ").concat(r,", ").concat(n,", ").concat(o)}}},k=w,y=(n("b578"),n("2877")),x=Object(y["a"])(k,g,v,!1,null,"2599165d",null),b=x.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flowchart-node",class:{selected:t.options.selected===t.id},style:t.nodeStyle,on:{mousedown:t.handleMousedown,mouseover:t.handleMouseOver,mouseleave:t.handleMouseLeave,mouseup:t.handleUp}},[n("div",{staticClass:"node-port node-input",on:{mousedown:t.inputMouseDown,mouseup:t.inputMouseUp}}),n("div",{staticClass:"node-main"},[n("div",{staticClass:"node-type",style:{backgroundColor:t.color},domProps:{textContent:t._s(t.type)}}),n("div",{staticClass:"node-label",domProps:{textContent:t._s(t.label)}})]),n("div",{staticClass:"node-port node-output",on:{mousedown:t.outputMouseDown}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show.delete,expression:"show.delete"}],staticClass:"node-options-pane"},[n("button",{staticClass:"node-edit"},[t._v("Edit")]),n("button",{staticClass:"node-delete"},[t._v("×")])])])},C=[],M={name:"FlowchartNode",props:{id:{type:Number,default:1e3,validator:function(t){return"number"===typeof t}},color:{type:String,default:"black",validator:function(t){return"string"===typeof t}},x:{type:Number,default:0,validator:function(t){return"number"===typeof t}},y:{type:Number,default:0,validator:function(t){return"number"===typeof t}},type:{type:String,default:"Default"},label:{type:String,default:"input name"},options:{type:Object,default:function(){return{centerX:1920,scale:1,centerY:140}}}},data:function(){return{show:{delete:!1,editMode:!1,colorMode:!1}}},mounted:function(){},computed:{nodeStyle:function(){return{top:this.options.centerY+this.y*this.options.scale+"px",left:this.options.centerX+this.x*this.options.scale+"px",transform:"scale(".concat(this.options.scale,")")}}},methods:{handleMousedown:function(t){var e=t.target||t.srcElement;e.className.indexOf("node-input")<0&&e.className.indexOf("node-output")<0&&this.$emit("nodeSelected",t),t.preventDefault()},handleMouseOver:function(){this.show.delete=!0},handleMouseLeave:function(){this.show.delete=!1},outputMouseDown:function(t){this.$emit("linkingStart"),t.preventDefault()},inputMouseDown:function(t){t.preventDefault()},inputMouseUp:function(t){this.$emit("linkingStop"),t.preventDefault()},handleUp:function(t){}}},L=M,O=(n("4993"),Object(y["a"])(L,D,C,!1,null,"0562574f",null)),_=O.exports;function N(t){var e=t.getBoundingClientRect(),n=window.pageYOffset,o=window.pageXOffset,i=e.top+n,a=e.left+o;return{top:Math.round(i),left:Math.round(a)}}function S(t,e){var n=e.pageX||e.clientX+document.documentElement.scrollLeft,o=e.pageY||e.clientY+document.documentElement.scrollTop,i=N(t),a=n-i.left,s=o-i.top;return[a,s]}var V={name:"VueFlowchart",props:{categories:{type:Array,default:function(){return[]}},scene:{type:Object,default:function(){return{centerX:1024,scale:1,centerY:140,nodes:[],links:[]}}},height:{type:Number,default:400}},data:function(){return{paneControl:!1,action:{linking:!1,dragging:!1,scrolling:!1,selected:0},mouse:{x:0,y:0,lastX:0,lastY:0},draggingLink:null,rootDivOffset:{top:0,left:0},nodeValues:{id:0,text:"",color:"",editModeNode:!1,editModeLink:!1,colors:["red","blue","yellow","orange","black","aqua","green","olive","purple"],colorIndex:-1},flowchartData:{centerX:1308,centerY:643,scale:1,nodes:[{id:1555337469783,x:-1294,y:-632,type:"Segment Member",label:"Test Members",color:"olive"},{id:1555337475998,x:-991,y:-486,type:"Wait",label:"2 Months",color:"navy"},{id:1555337502295,x:-1240,y:-321,type:"Email1",label:"",color:"green"},{id:1555337535151,x:-878,y:-181,type:"Decision",label:"Clicked Email1",color:"purple"},{id:1555337563864,x:-1011,y:79,type:"Email2",label:"",color:"black"},{id:1555337584872,x:-615,y:29,type:"Form",label:"",color:"blue"}],links:[{id:1,from:1555337469783,to:1555337475998,text:"-"},{id:2,from:1555337475998,to:1555337502295,text:"-"},{id:3,from:1555337502295,to:1555337535151,text:"-"},{id:4,from:1555337535151,to:1555337563864,text:"True"},{id:5,from:1555337535151,to:1555337584872,text:"False"}]},nodeCategory:[{text:"Segment Member",color:"olive"},{text:"Email1",color:"green"},{text:"Email2",color:"black"},{text:"Form",color:"blue"},{text:"Landing Page",color:"red"},{text:"Decision",color:"purple"},{text:"Wait",color:"navy"}]}},components:{FlowchartLink:b,FlowchartNode:_},computed:{nodeOptions:function(){return{centerY:this.flowchartData.centerY,centerX:this.flowchartData.centerX,scale:this.flowchartData.scale,offsetTop:this.rootDivOffset.top,offsetLeft:this.rootDivOffset.left,selected:this.action.selected}},lines:function(){var t=this,e=this.flowchartData.links.map(function(e){var n,o,i,a,s,r,l=t.findNodeWithID(e.from),c=t.findNodeWithID(e.to);n=t.flowchartData.centerX+l.x,o=t.flowchartData.centerY+l.y;var d=t.getPortPosition("bottom",n,o),u=Object(m["a"])(d,2);a=u[0],i=u[1],n=t.flowchartData.centerX+c.x,o=t.flowchartData.centerY+c.y;var h=t.getPortPosition("top",n,o),f=Object(m["a"])(h,2);return s=f[0],r=f[1],{start:[a,i],end:[s,r],id:e.id,text:e.text}});if(this.draggingLink){var n,o,i,a,s=this.findNodeWithID(this.draggingLink.from);n=this.flowchartData.centerX+s.x,o=this.flowchartData.centerY+s.y;var r=this.getPortPosition("bottom",n,o),l=Object(m["a"])(r,2);a=l[0],i=l[1],e.push({start:[a,i],end:[this.draggingLink.mx,this.draggingLink.my]})}return e}},methods:{exportToJson:function(){return this.flowchartData.nodes},findNodeWithID:function(t){return this.flowchartData.nodes.find(function(e){return t===e.id})},getPortPosition:function(t,e,n){return"top"===t?[e+100,n]:"bottom"===t?[e+100,n+120]:void 0},linkingStart:function(t){this.action.linking=!0,this.draggingLink={from:t,mx:0,my:0}},linkingStop:function(t){var e=this;if(this.draggingLink&&this.draggingLink.from!==t){var n=this.flowchartData.links.find(function(n){return n.from===e.draggingLink.from&&n.to===t});if(!n){var o=Math.max.apply(Math,[0].concat(Object(p["a"])(this.flowchartData.links.map(function(t){return t.id})))),i={id:o+1,from:this.draggingLink.from,to:t,text:"-"};this.flowchartData.links.push(i),this.$emit("linkAdded",i)}}this.draggingLink=null},linkDelete:function(t){var e=this.flowchartData.links.find(function(e){return e.id===t});e&&(this.flowchartData.links=this.flowchartData.links.filter(function(e){return e.id!==t}),this.$emit("linkBreak",e))},nodeSelected:function(t,e){this.action.dragging=t,this.action.selected=t,this.$emit("nodeClick",t),this.mouse.lastX=e.pageX||e.clientX+document.documentElement.scrollLeft,this.mouse.lastY=e.pageY||e.clientY+document.documentElement.scrollTop},handleMove:function(t){if(this.action.linking){var e=S(this.$el,t),n=Object(m["a"])(e,2);this.mouse.x=n[0],this.mouse.y=n[1];var o=[this.mouse.x,this.mouse.y];this.draggingLink.mx=o[0],this.draggingLink.my=o[1]}if(this.action.dragging){this.mouse.x=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouse.y=t.pageY||t.clientY+document.documentElement.scrollTop;var i=this.mouse.x-this.mouse.lastX,a=this.mouse.y-this.mouse.lastY;this.mouse.lastX=this.mouse.x,this.mouse.lastY=this.mouse.y,this.moveSelectedNode(i,a)}if(this.action.scrolling){var s=S(this.$el,t),r=Object(m["a"])(s,2);this.mouse.x=r[0],this.mouse.y=r[1];var l=this.mouse.x-this.mouse.lastX,c=this.mouse.y-this.mouse.lastY;this.mouse.lastX=this.mouse.x,this.mouse.lastY=this.mouse.y,this.flowchartData.centerX+=l,this.flowchartData.centerY+=c}},handleUp:function(t){var e=t.target||t.srcElement;this.$el.contains(e)&&(("string"!==typeof e.className||e.className.indexOf("node-input")<0)&&(this.draggingLink=null),"string"===typeof e.className&&e.className.indexOf("node-delete")>-1&&this.nodeDelete(this.action.dragging),"string"===typeof e.className&&e.className.indexOf("node-edit")>-1&&this.nodeEdit(this.action.dragging)),this.action.linking=!1,this.action.dragging=null,this.action.scrolling=!1,console.log(f()(this.flowchartData),"export")},handleDown:function(t){var e=t.target||t.srcElement;if((e===this.$el||e.matches("svg, svg *"))&&1===t.which){this.action.scrolling=!0;var n=S(this.$el,t),o=Object(m["a"])(n,2);this.mouse.lastX=o[0],this.mouse.lastY=o[1],this.action.selected=null}this.$emit("canvasClick",t)},moveSelectedNode:function(t,e){var n=this,o=this.flowchartData.nodes.findIndex(function(t){return t.id===n.action.dragging}),i=this.flowchartData.nodes[o].x+t/this.flowchartData.scale,a=this.flowchartData.nodes[o].y+e/this.flowchartData.scale;this.$set(this.flowchartData.nodes,o,u()(this.flowchartData.nodes[o],{x:i,y:a}))},nodeDelete:function(t){this.flowchartData.nodes=this.flowchartData.nodes.filter(function(e){return e.id!==t}),this.flowchartData.links=this.flowchartData.links.filter(function(e){return e.from!==t&&e.to!==t}),this.$emit("nodeDelete",t)},nodeEdit:function(t){if(t){var e=this.flowchartData.nodes.filter(function(e){return e.id===t})[0];this.nodeValues.id=t,this.nodeValues.editModeNode=!0,this.nodeValues.text=e.label,this.nodeValues.color=e.color}},changeColor:function(t,e){this.nodeValues.color=t,this.nodeValues.colorIndex=e},acceptChanges:function(){var t=this;this.nodeValues.editModeNode&&this.flowchartData.nodes.forEach(function(e){e.id===t.nodeValues.id&&(e.label=t.nodeValues.text,e.color=t.nodeValues.color)}),this.nodeValues.editModeLink&&this.flowchartData.links.forEach(function(e){e.id===t.nodeValues.id&&(e.text=t.nodeValues.text)}),this.nodeValues.editModeNode=!1,this.nodeValues.editModeLink=!1},addNode:function(t){var e=r()();this.flowchartData.nodes.push({id:e,x:-400,y:50,type:t.text,label:"##value##",color:t.color}),this.paneControl=!1},linkEdit:function(t){if(t){var e=this.flowchartData.links.filter(function(e){return e.id===t})[0];this.nodeValues.id=t,this.nodeValues.editModeLink=!0,this.nodeValues.text=e.text}}},mounted:function(){var t;(this.rootDivOffset.top=this.$el?this.$el.offsetTop:0,this.rootDivOffset.left=this.$el?this.$el.offsetLeft:0,this.scene.nodes.length>0&&(this.flowchartData=this.scene),this.categories.length>0)&&(t=this.nodeCategory).push.apply(t,Object(p["a"])(this.categories))}},E=V,$=(n("9f2a"),Object(y["a"])(E,l,c,!1,null,"fc1f846e",null)),X=$.exports,Y={name:"app",components:{SimpleFlowchart:X},data:function(){return{scene:{centerX:1024,centerY:140,scale:1,nodes:[{id:2,x:-700,y:-69,type:"Action",label:"test1",color:"red"},{id:4,x:-357,y:80,type:"Script",label:"test2",color:"olive"},{id:6,x:-557,y:80,type:"Rule",label:"test3",color:"green"}],links:[{id:3,from:2,to:4}]},newNodeType:0,newNodeLabel:"",nodeCategory:[],paneControl:!1,flowchartData:{centerX:1026,centerY:140,scale:1,nodes:[],links:[]}}},methods:{exportToJson:function(){},canvasClick:function(t){},importAsJson:function(t){console.log(t)},addNode:function(t){var e=r()();this.scene.nodes.push({id:e,x:-400,y:50,type:t.text,label:"##value##",color:t.color})},nodeClick:function(t){this.exportToJson()},nodeDelete:function(t){},linkBreak:function(t){},linkAdded:function(t){}}},j=Y,P=(n("5c0b"),Object(y["a"])(j,i,a,!1,null,null,null)),T=P.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(T)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("5e27"),i=n.n(o);i.a},"5e27":function(t,e,n){},"9f2a":function(t,e,n){"use strict";var o=n("a387"),i=n.n(o);i.a},a387:function(t,e,n){},b578:function(t,e,n){"use strict";var o=n("3125"),i=n.n(o);i.a}});
//# sourceMappingURL=app.c07afd73.js.map